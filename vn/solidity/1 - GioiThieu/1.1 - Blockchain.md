# Cản bản về Blockchain

## Blockchain là gì?
Blockchain là một sổ cái số phân tán và không thể thay đổi, ghi lại tất cả các giao dịch xảy ra trên một mạng. Mỗi khối trong chuỗi chứa một số lượng giao dịch được mã hóa, và khi một khối mới được tạo ra, nó được liên kết mật thiết với khối trước đó, tạo thành một chuỗi liên tục không thể bị thay đổi mà không bị phát hiện. Điều này đảm bảo tính minh bạch và an toàn cao, vì thông tin không thể bị thay đổi hoặc xóa một cách dễ dàng mà không có sự đồng thuận của mạng, làm cho blockchain trở thành công nghệ nền tảng cho các ứng dụng như tiền điện tử và hợp đồng thông minh.

## Ethereum POS consensus
`PoS`, viết tắt của Proof of Stake, là một cơ chế đồng thuận được sử dụng bởi Ethereum và nhiều blockchain khác để đảm bảo an toàn và tính nhất quán của mạng mà không cần phải thực hiện các phép toán toán học cồng kềnh như trong Proof of Work (PoW). Trong PoS, quyền lựa chọn người tạo khối mới (thường được gọi là `validator`) không dựa trên khả năng giải các bài toán toán học phức tạp mà dựa vào số lượng tiền ảo họ đặt cược (`stake`) làm bảo đảm cho sự trung thực của họ.

Các `validator` chọn lựa tham gia vào quá trình tạo khối bằng cách `stake` ít nhất `32 ETH`. Nếu họ đề xuất một khối mới mà được mạng chấp nhận, họ nhận được `block reward`. Tuy nhiên, nếu `validator` hành động gian lận hoặc không đáng tin cậy, phần `stake` của họ có thể bị mất. Điều này khuyến khích các validator hành động trung thực và góp phần vào sự an toàn và bảo mật của mạng.

Quá trình chuyển đổi sang `PoS` giúp giảm đáng kể lượng năng lượng tiêu thụ so với `PoW`, vì nó không yêu cầu phần cứng máy tính mạnh mẽ và tiêu thụ năng lượng lớn để thực hiện các phép toán. Điều này làm cho Ethereum trở nên bền vững hơn và thân thiện với môi trường, đồng thời cung cấp một hệ thống đồng thuận an toàn và hiệu quả.

## EVM
`EVM`, viết tắt của `Ethereum Virtual Machine`, là một môi trường máy ảo phi tập trung chạy trên mạng blockchain Ethereum. `EVM` cho phép việc thực thi các hợp đồng thông minh, là những chương trình tự động thực hiện các giao dịch hoặc các hành động cụ thể dựa trên các điều kiện đã được mã hóa trước. Hợp đồng thông minh được viết bằng các ngôn ngữ lập trình như Solidity, sau đó được biên dịch thành `bytecode` mà `EVM` có thể hiểu và thực thi.

`EVM` hoạt động như một lớp trừu tượng giữa các hợp đồng thông minh và phần cứng máy tính thực sự, cho phép tính toán được thực hiện một cách an toàn và cách ly, ngăn chặn các hợp đồng từ việc truy cập trực tiếp vào hệ thống của máy chủ. Điều này tạo ra một môi trường thực thi mã rất linh hoạt và an toàn, khuyến khích sự phát triển của ứng dụng phi tập trung (DApps) và các dự án tiền điện tử mới trên nền tảng Ethereum.

## Smart contract là gì?
`Smart contract` là một dạng chương trình máy tính được thiết kế để tự động thực hiện, kiểm soát, hoặc xác nhận các sự kiện và hành động theo các điều khoản đã được lập trình sẵn. Chúng tồn tại và hoạt động trên `Ethereum`, đảm bảo tính minh bạch và bảo mật cao do không thể bị sửa đổi sau khi đã triển khai. `Smart contract` giúp tự động hóa các quy trình, giảm bớt sự cần thiết của trung gian và giảm thiểu rủi ro lừa đảo hoặc sai sót. Chúng rất linh hoạt và có thể được sử dụng trong nhiều lĩnh vực khác nhau, từ tài chính và bảo hiểm đến quản lý chuỗi cung ứng và bất động sản. Sự phát triển của `smart contract` đang mở ra một kỷ nguyên mới trong cách thức tương tác và thực hiện các giao dịch kỹ thuật số, mang lại hiệu quả, minh bạch và tự chủ lớn hơn cho người dùng.

## Transaction và cách ký Transaction
Trong mạng lưới Ethereum, "transaction" hoặc giao dịch là một hành động được thực hiện bởi người dùng để chuyển ETH (Ethereum) hoặc các token dựa trên Ethereum từ địa chỉ này sang địa chỉ khác, hoặc để tương tác với các hợp đồng thông minh (smart contract). Mỗi giao dịch bao gồm các thông tin như địa chỉ nguồn, địa chỉ đích, số lượng tiền được chuyển, gas (phí giao dịch) và dữ liệu tùy chọn nếu giao dịch tương tác với hợp đồng thông minh.

Khi thực hiện giao dịch trên Ethereum, việc ký giao dịch bằng ví crypto như MetaMask là bước quan trọng để đảm bảo tính an toàn và bảo mật. Cụ thể, quá trình này diễn ra như sau:

1. Tạo Giao Dịch: Người dùng nhập các thông tin cần thiết cho giao dịch như địa chỉ nhận, số lượng ETH hoặc token cần chuyển, và gas. Trong ví dụ như MetaMask, người dùng có thể điều chỉnh mức gas để giao dịch được xử lý nhanh hơn.

2. Ký Giao Dịch: Sau khi thông tin giao dịch được nhập, ví sẽ tạo ra một giao dịch kỹ thuật số được ký bằng khóa riêng của người dùng. Việc ký giao dịch này chứng minh rằng người dùng có quyền sử dụng địa chỉ từ đó giao dịch được gửi đi mà không cần tiết lộ khóa riêng của họ.

3. Gửi Giao Dịch: Giao dịch đã ký sau đó sẽ được gửi tới mạng lưới Ethereum thông qua ví như MetaMask. Mạng lưới sẽ xác nhận giao dịch và thực hiện nó, chuyển tiền hoặc tương tác với hợp đồng thông minh như đã yêu cầu.

4. Xác Nhận Giao Dịch: Cuối cùng, giao dịch sẽ được xác nhận bởi mạng lưới, và thông tin về nó sẽ được ghi lại trên blockchain. Người dùng có thể theo dõi trạng thái của giao dịch thông qua các công cụ trực tuyến như Etherscan.

Quá trình này không chỉ giúp đảm bảo giao dịch được thực hiện một cách an toàn mà còn giúp ngăn chặn việc giả mạo hoặc thay đổi giao dịch một cách không phép, nhờ vào sự minh bạch và không thể thay đổi của blockchain.

## Gas, Block Rewards và EIP-1559
Trong Ethereum, "gas" là đơn vị đo lường sử dụng để tính phí giao dịch và thực thi hợp đồng thông minh trên mạng. Gas phản ánh lượng tài nguyên máy tính cần thiết để thực hiện một giao dịch hoặc để chạy một hợp đồng thông minh. Mỗi loại hành động thực hiện trên mạng Ethereum, từ việc gửi ETH đến việc tương tác với hợp đồng thông minh, đều yêu cầu một lượng gas nhất định để xử lý.
[https://etherscan.io/tx/0x390e9ed56168663385d435743b374f4099441f92171de43f343385761a5dd759](https://etherscan.io/tx/0x390e9ed56168663385d435743b374f4099441f92171de43f343385761a5dd759)

Gas price: 
Gas limit: 21,000 gas

Base fee: the minimum **gas price** to send your transaction. Sau EIP-1559 thì Ethereum sẽ `burn` một số lượng Ether bằng với `base fee * gas limit`
Priority fee: 

Nếu nhiều người gửi giao dịch thì phí gas sẽ đắt hơn, và nhiều Ether sẽ được `burn` hơn.